#summary This tutorial shows how to install KOALA in an typhoonAE PaaS that runs inside Ubuntu 9.04
#labels Featured

KOALA can run inside a Private Cloud PaaS with [http://code.google.com/p/typhoonae/ typhoonAE]. typhoonAE executes automatically over [http://aws.amazon.com/ec2/ Amazon EC2] as well as [http://www.xen.org Xen] and VMware.

This tutorial shows how to start typhoonAE inside Ubuntu 9.04 (Jaunty Jackalope) and run KOALA inside typhoonAE.

= What typhoonAE is = 

TyphoonAE is an open source re-implementation of Google's App Engine. TyphoonAE runs inside Xen or VMware instances and inside EC2 too. The software consists of the App Engine SDK, some open source components to provide the App Engine functionalities and some Python scripts. Almost all services of Googleâ€™s App Engine are implemented, except incoming mail. The typhoonAE [http://code.google.com/p/typhoonae/wiki/RoadMap Road Map] has more information about this. 

= Installation of typhoonAE and KOALA = 

At first you neet do install a few packages

{{{
# apt-get install gcc g++ make python-imaging python2.5 python2.5-dev subversion
# apt-get install libmysql++-dev libncurses5-dev  libssl-dev  gettext  erlang-nox erlang-dev 
# apt-get install libexpat1-dev
}}}

The next steps should be done as user and not root!

Get typhoonAE

{{{
$ wget http://typhoonae.googlecode.com/files/typhoonae-buildout-0.1.5.tar.gz
$ tar -xvzf typhoonae-buildout-0.1.5.tar.gz 
$ cd typhoonae-buildout-0.1.5
}}}

Check your Python version

{{{
$ python2.5 --version
Python 2.5.4
}}}

Build the stack

{{{
$ python2.5 bootstrap.py
$ ./bin/buildout
}}}

Get the KOALA code and run it inside typhoonAE

{{{
$ svn checkout http://koalacloud.googlecode.com/svn/trunk/ koalacloud
$ cd typhoonae-buildout-0.1.5/
$ ./bin/apptool /home/bauni/koalacloud/
$ ./bin/supervisord
}}}

Check if all typhoonAE services are up and running

{{{
#./bin/supervisorctl
ejabberd                         RUNNING    pid 32625, uptime 0:59:20
intid                            RUNNING    pid 32691, uptime 0:59:20
koalacloud:koalacloud_00         RUNNING    pid 434, uptime 0:54:02
koalacloud:koalacloud_01         RUNNING    pid 433, uptime 0:54:02
koalacloud:koalacloud_02         RUNNING    pid 436, uptime 0:54:02
koalacloud:koalacloud_03         RUNNING    pid 435, uptime 0:54:02
koalacloud_deferred_taskworker   RUNNING    pid 32685, uptime 0:59:20
koalacloud_taskworker            RUNNING    pid 32647, uptime 0:59:20
memcached                        RUNNING    pid 32630, uptime 0:59:20
mongod                           RUNNING    pid 32623, uptime 0:59:20
nginx                            RUNNING    pid 32697, uptime 0:59:20
rabbitmq                         RUNNING    pid 32624, uptime 0:59:20
}}}

Now, you can reach KOALA at [http://localhost:8080/ http://localhost:8080/]

= It works =

[http://koalacloud.googlecode.com/svn/trunk/tutorial/images/smaller/KOALA_in_typhoonAE_1_29_8_2010_small.jpg]

[http://koalacloud.googlecode.com/svn/trunk/tutorial/images/smaller/KOALA_in_typhoonAE_2_29_8_2010_small.jpg]

[http://koalacloud.googlecode.com/svn/trunk/tutorial/images/smaller/KOALA_in_typhoonAE_3_29_8_2010_small.jpg]

= Some helpful commands =

Shutdown typhoonAE with

{{{
./bin/supervisorctl shutdown
}}}

If you want to run more instances of KOALA, change the value of *numprocs* inside */etc/koalacloud-supervisor.conf* in the section *fcgi-program:koalacloud*

If you changed the applications settings in */etc/koalacloud-supervisor.conf*

{{{
./bin/supervisorctl update
}}}